# 足球预测-单机版

​		本软件旨在更好的实现足球对阵的预测，足球对局的更多依赖球队的实力，但是在漫长的赛程当中，各支球队会适时依据形势选择策略。除此之外，总积分排名、主客实力差距、进失球对比、同分形势对比、球队策略、球员伤停、历史赛果、未来赛程也是不可缺少的因素。

当前需要完善的功能：

1.QTableView列宽设置固定值；

2.球队详细对阵新增赛果与预测状态；

3.对阵分析表与球队详细对阵的联动；

4.球队近5场状态的判断与字符串的拼接；

5.折线图的实现

6.将球队详情更改为QTableWidget，模型加载

# 数据更新

球队对阵信息表===teamAgainstTable

可编辑，可插入数据库

球队积分信息表===teamPointTable

不可编辑

对阵详情信息表===teamDetailTable

双击球队对阵弹出详情对阵表

# 预测模型

球队当前总排名、主场数据、客场数据、球员伤停；进球数对比，是否存在同分情况，球队策略，历史对阵，未来赛形势可能

个人模型思考：
总进攻与总防守能力的对比
主队进攻与防守对比客队的进攻与防守
上下半场的对比
近期场次的对比
伤停因子

场外因素

足球预测资料
足球竞彩玩法最早起源于欧洲，其中预测胜负的方法除了收集球队的信息以外，各种基于数学模型的算法层出不穷，我们一起来看下常用的算法有哪些。

## 一、埃罗预测法：
​		美国物理学家Aroad-Elo博士创立的，Elo博士最早将这套方法用于预测国际象棋的比赛结果。他在自己的《棋分高下：过去和现在》一书中对该方法作了详细说明，通过对1500场英超比赛的研究，杰奎斯·布莱克对Elo预测法进行了不懈地改进，现已经被广泛应用足球赛事中。
​		Elo预测法的改进模型是通过研究主客场球队在比赛前的积分情况来预测胜负的，Elo预测法的预测回归方程式为：主场球队取胜的可能性=44.8％+（0.53％乘以两队积分差）客场球队的获胜可能性=24.5％+（两队积分差乘以0.39％）

​		elo等级分制度应用很广泛，大部分棋类比赛和网络游戏都会用到，比如国际象棋，我们比较熟悉的手游王者荣耀等都是应用了这个机制。
ELO计算方法：
Ra：A玩家当前的积分
Rb：B玩家当前的积分
Sa：实际胜负值，胜=1，平=0.5，负=0
Ea：预期A的胜负值，Ea=1/(1+10(Rb-Ra)/400)
Eb：预期B的胜负值，Eb=1/(1+10(Ra-Rb)/400)
E值也为预估，Ea+Eb=1
R'a：A玩家进行一场比赛之后的积分，R'a=Ra+k(Sa - Ea)；其中k是一个常量系数，k值的大小直接关系到根据胜负关系计算出的积分变化值。
​		通常水平越高的比赛中，其k值越小，这样做的目的是避免少数的几场比赛就能改变高端顶尖玩家的排名

```python
class Elorating:
    ELO_RESULT_WIN = 1
    ELO_RESULT_LOSS = -1
    ELO_RESULT_TIE = 0
    ELO_RATING_DEFAULT = 1500;

	ratingA = 0
    ratingB = 0

    def __init__(self, ratingA = ELO_RATING_DEFAULT, ratingB = ELO_RATING_DEFAULT):
        self.ratingA = ratingA
        self.ratingB = ratingB

    def setResult(self, result):
        scoreAwin = self.computeScore(self.ratingA, self.ratingB)
        scoreBwin = self.computeScore(self.ratingB, self.ratingA)

        score_adjust = 0

        if result == self.ELO_RESULT_WIN:
            score_adjust = 1
        elif result == self.ELO_RESULT_LOSS:
            score_adjust = 0
        else:
            score_adjust = 0.5

  		self.ratingA = self.ratingA + self.computeK(self.ratingA) * (score_adjust - scoreAwin)
        self.ratingB = self.ratingB + self.computeK(self.ratingB) * (score_adjust - scoreBwin)

    def computeK(self, rating):
        if rating >= 2400:
            return 16
        elif rating >= 2100:
            return 24
        else:
            return 36

    def computeScore(self, rating1, rating2):
        return 1 / (1+pow(10, (rating1 - rating2) / 400))
    pass
```


## 二、进球率预测法：
​		1990年，大卫·杰克逊和K.R.莫舍斯基表过论文--《比赛中的指数》，第一次提出了以平均每场比赛进球率作为预测一只球队下一次比赛成绩的数学模型。运用这一方法预测英格兰超级联赛和意大利甲级联赛结果是准确率最高的。
进球率预测法有四个原则：
1.当参赛双方的平均进球率之差为0.30（不含0.30）以上时平均进球率高的球队胜；
2.当参赛双方的平均进球率之差为0.10以上至0.30（含0.30）时，若主场球队的平均进球率高，则主场球队胜；
3.当参赛双方平均进球率之差为0.10以上至0.30（含0.30）时，若主场球队平均进球率低于客场球队的平均进球率，则主场球队胜或平。
4.当参赛双方平均进球率之差为0.10（含0.10）以下时，主场球队胜或平。

## 三、六场预测法：
​		一般我们应将联赛分为三个阶段，前期、中期、后期，若联赛20支球队，38轮球，埃罗盘最好为38/3=13场为计算周期，这样比现在的6场埃罗法更有效。这种预测方法最早是英国报纸提供给彩民的简单的预测方法，经过有心人的改进，六场预测法的预测准确率不断提高。应用改进后的6场预测法，对英超和意甲联赛近600场比赛进行了预测，得出如下预测定义：
1.当对赛的两队最近六场积分差为6或6以上时，最近六场积分高的球队胜；
2.当对赛的两队最近六场积分差为5时，若主场球队最近六场积分高，则主场球队胜；若主场球队最近六场积分低，则主场球队胜或平；
3.当对赛的两队最近六场积分差为2～4时，则最近六场积分高的球队胜。
4.当对赛的两队最近六场积分差为1或0时，则主场球队胜或平。

## 四、近六场积分法：
“近六场积分法”"是通过了两队最近6轮的积分差来预测胜负的。
1.两队积分差为绝对值0~1，则主队胜或平。
2.两队积分差为2以上，则积分高的球队胜。
3.两队积分差为-5时，主队胜或平。

